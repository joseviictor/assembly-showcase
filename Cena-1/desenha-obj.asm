; *********************************************************************************
; * IST-UL | UAlg
; * Modulo:    lab4-objeto.asm
; * Descrição: Este programa ilustra o desenho de um objeto do ecrã, em que os pixels
; *            são definidos por uma tabela.
; *			A zona de dados coloca-se tipicamente primeiro, para ser mais visível,
; *			mas o código tem de começar no endereço 0000H. As diretivas PLACE
; *			permitem esta inversão da ordem de dados e código no programa face aos endereços
; *********************************************************************************

; *********************************************************************************
; * Constantes
; *********************************************************************************
COMANDOS				EQU	6000H				; endereço de base dos comandos do MediaCenter

APAGA_PIXEIS_ECRA		EQU COMANDOS + 00H		; Apaga todos os pixeis do ecrã especificado
SELECIONA_ECRA			EQU COMANDOS + 04H		; Seleciona o ecrã especificado
MOSTRA_ECRA				EQU COMANDOS + 06H		; Mostra o ecrã especificado
ESCONDE_ECRA			EQU COMANDOS + 08H		; Esconde o ecrã especificado
DEFINE_LINHA			EQU COMANDOS + 0AH		; endereço do comando para definir a linha
DEFINE_COLUNA			EQU COMANDOS + 0CH		; endereço do comando para definir a coluna
DEFINE_PIXEL			EQU COMANDOS + 12H		; endereço do comando para escrever um pixel
APAGA_AVISO				EQU COMANDOS + 40H		; endereço do comando para apagar o aviso de nenhum cenário selecionado
APAGA_ECRA				EQU COMANDOS + 02H		; endereço do comando para apagar todos os pixels já desenhados
SELECIONA_BG			EQU COMANDOS + 42H		; endereço do comando para selecionar uma imagem de fundo
REMOVE_BG	 			EQU COMANDOS + 40H 		; endereço do comando para remover background

SELECTIONA_MIDIA		EQU COMANDOS + 48H		; seleciona arquivo de midia (GIF, som ou video), para ser usado nos comandos subsequentes
INICIA_SOM				EQU COMANDOS + 5CH		; endereço do comando para reproduzir som continuamente até ser parado
VOLUME_SOM				EQU COMANDOS + 4AH		; define volume do som (0-100%)
PARA_SOM				EQU COMANDOS + 66H		; endereço do comando para parar som
PAUSA_SOM 				EQU COMANDOS + 5EH		; endereço do comando para pausar som
CONTINUA_SOM			EQU COMANDOS + 60H		; endereço do comando para continuar som

TEC_LIN					EQU 0C000H				; endereço das linhas do teclado (periférico POUT-2)
TEC_COL					EQU 0E000H				; endereço das colunas do teclado (periférico PIN)
MASCARA					EQU	0FH					; para isolar os 4 bits de menor peso, ao ler as colunas do teclado

NUM_ECRAS				EQU 7					; número de ecrãs 0-7 (8 no total)

DELAY					EQU 0200H				; valor usado para implementar um atraso temporal (0200H = 512)

; #######################################################################
; # ZONA DE DADOS 
; #######################################################################
	PLACE		0300H

; Reserva do espaço para as pilhas dos processos
	STACK 100H			; espaço reservado para a pilha do processo "programa principal"
SP_inicial_prog_princ:	; este é o endereço com que o SP deste processo deve ser inicializado
							
	STACK 100H			; espaço reservado para a pilha do processo "teclado"
SP_inicial_teclado:		; este é o endereço com que o SP deste processo deve ser inicializado
							
	STACK 100H			; espaço reservado para a pilha do processo "objeto"
SP_inicial_arvore:		; este é o endereço com que o SP deste processo deve ser inicializado

	STACK 100H			; espaço reservado para a pilha do processo "objeto"
SP_inicial_neve:		; este é o endereço com que o SP deste processo deve ser inicializado

linha_carregada:
	WORD 0				; variável que indica se uma tecla foi carregada
						; 0 - nenhuma tecla carregada
						; 1, 2, 4 ou 8 - tecla carregada, e o valor indica a linha da tecla) 
coluna_carregada:
	WORD 0				; variável que indica se uma tecla foi carregada
						; 0 - nenhuma tecla carregada
						; 1, 2, 4 ou 8 - tecla carregada, e o valor indica a coluna da tecla) 

; ##########################################################################################
; # variáveis para guardar a posição do objeto
; ##########################################################################################
linha:
	WORD 0				; espaço reservado para guardar a linha do objeto

coluna:
	WORD 0				; espaço reservado para guardar a coluna do objeto

largura:
	WORD 0				; espaço reservado para guardar a largura do objeto

altura:
	WORD 0				; espaço reservado para guardar a altura do objeto

; ##########################################################################################
; # variáveis para controlo de animações
; ##########################################################################################
animacao_neve:			; flag para determinar se é para executar animação da neve
	WORD 0

animacao_arvore:		; flag para determinar se é para executar animação da árvore
	WORD 0

flag_neve_exibida:
	WORD 0				; flag para determinar qual objeto da neve está sendo exibido (0 - nenhum, 1 ou 2)

flag_arvore_exibida:
	WORD 0				; flag para determinar qual objeto das luzes está sendo exibido (0 - nenhum, 1 ou 2)

contador_atraso:
	WORD DELAY			; contador usado para gerar o atraso entre os movimentos dos objetos

giftbox:				; tabela que define o objeto giftbox (cor, largura, pixels)
	WORD  6, 8, 11, 15 	; linha,coluna,largura,altura
	WORD  0000H,0FC22H,0FC22H, 0000H, 0000H, 0000H, 0000H, 0000H,0FC22H,0FC22H, 0000H
	WORD  0FC22H,0FE12H,0FE12H,0FE12H, 0000H, 0000H, 0000H,0FC22H,0FE12H,0FE12H,0FC22H
	WORD  0FC22H,0FE12H,0FE12H,0FE12H,0FC22H,0FC22H,0FC22H,0FE12H,0FE12H,0FE12H,0FC22H
	WORD  0000H,0FC22H,0FE12H,0FE12H,0FC22H,0FE12H,0FC22H,0FE12H,0FE12H,0FC22H, 0000H
	WORD  0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H
	WORD  0F353H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F353H
	WORD  0F353H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F462H,0F353H
	WORD  0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H,0F353H
	WORD  0000H,0F353H,0F462H,0F462H,0FC22H,0FE12H,0FC22H,0F462H,0F462H,0F353H, 0000H
	WORD  0000H,0F353H,0F462H,0F462H,0FC22H,0FE12H,0FC22H,0F462H,0F462H,0F353H, 0000H
	WORD  0000H,0F353H,0F462H,0F462H,0FC22H,0FE12H,0FC22H,0F462H,0F462H,0F353H, 0000H
	WORD  0000H,0F353H,0F462H,0F462H,0FC22H,0FE12H,0FC22H,0F462H,0F462H,0F353H, 0000H
	WORD  0000H,0F353H,0F462H,0F462H,0FC22H,0FE12H,0FC22H,0F462H,0F462H,0F353H, 0000H
	WORD  0000H,0F353H,0F462H,0F462H,0FC22H,0FE12H,0FC22H,0F462H,0F462H,0F353H, 0000H
	WORD  0000H,0F353H,0F353H,0F353H,0FC22H,0FE12H,0FC22H,0F353H,0F353H,0F353H, 0000H
	
pai_natal:				; tabela que define o objeto pai natal (cor, largura, pixels)
	WORD  4, 26, 13, 17 ; linha,coluna,largura,altura
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H,0FBBBH,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H,0FC22H,0FC22H,0FC22H,0FFFFH,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H,0FC22H,0FC22H,0FE12H,0FE12H,0FE12H,0FC22H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H,0FC22H,0FC22H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FC22H, 0000H, 0000H
	WORD  0000H,0FC22H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FC22H, 0000H
	WORD  0FC22H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FE12H,0FC22H
	WORD  0FE12H,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FE12H
	WORD  0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FFFFH,0FFFFH
	WORD  0000H,0FFFFH,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FFFFH, 0000H
	WORD  0000H,0FEA7H,0FEA7H,0FEA7H,0F000H,0FEA7H,0FEA7H,0FEA7H,0F000H,0FEA7H,0FEA7H,0FEA7H, 0000H
	WORD  0000H,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH, 0000H
	WORD  0000H,0FFFFH,0FFFFH,0FFFFH,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FEA7H,0FFFFH,0FFFFH,0FFFFH, 0000H
	WORD  0000H,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FEA7H,0FEA7H,0FEA7H,0FFFFH,0FFFFH,0FFFFH,0FFFFH, 0000H
	WORD  0000H,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH, 0000H
	WORD  0000H,0FBBBH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FBBBH, 0000H
	WORD  0000H, 0000H,0FBBBH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FBBBH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H,0FBBBH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FFFFH,0FBBBH, 0000H, 0000H, 0000H

arvore:					; tabela que define o objeto pai natal (cor, largura, pixels)
	WORD  6, 44, 13, 16 ; linha,coluna,largura,altura
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H,0F562H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H,0F562H,0F793H,0F562H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H,0F785H,0F793H,0F785H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H,0F562H,0F793H,0F793H,0F793H,0F562H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H,0F785H,0F793H,0F793H,0F793H,0F785H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H,0F562H,0F793H,0F793H,0F793H,0F793H,0F793H,0F562H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H,0F785H,0F793H,0F793H,0F793H,0F793H,0F793H,0F785H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H,0F562H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F562H, 0000H, 0000H
	WORD  0000H, 0000H,0F785H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F785H, 0000H, 0000H
	WORD  0000H,0F562H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F562H, 0000H
	WORD  0000H,0F785H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F785H, 0000H
	WORD  0F562H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F793H,0F562H
	WORD  0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H,0F562H
	WORD  0000H, 0000H, 0000H, 0000H,0F941H,0F953H,0F953H,0F953H,0F941H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H,0F941H,0F941H,0F941H,0F941H,0F941H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H

luzes1:					; tabela que define o objeto luzes da árvore 1 (cor, largura, pixels)
	WORD  7, 47, 8, 11 	; linha,coluna,largura,altura
	WORD  0000H, 0000H, 0000H,0FAE1H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H,0FE12H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H,0FFC0H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H,0FF70H, 0000H, 0000H,0FAE1H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FF70H, 0000H,0FFC0H, 0000H, 0000H,0FE12H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0FE12H, 0000H, 0000H, 0000H, 0000H,0FAE1H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H,0FFC0H, 0000H, 0000H, 0000H,0FF70H

luzes2:					; tabela que define o objeto luzes da árvore 2 (cor, largura, pixels)
	WORD  7, 47, 8, 11 	; linha,coluna,largura,altura
	WORD  0000H, 0000H, 0000H,0FE12H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H,0FAE1H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H,0F903H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H,0FFC0H, 0000H, 0000H,0FE12H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFC0H, 0000H,0F903H, 0000H, 0000H,0FAE1H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0FAE1H, 0000H, 0000H, 0000H, 0000H,0FE12H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H,0F903H, 0000H, 0000H, 0000H,0FFC0H

merry_xmas:				; tabela que define o objeto que contém o texto merry xmas (cor, largura, pixels)
	WORD  24, 9, 49, 5 	; linha,coluna,largura,altura
	WORD  0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H,0FFFFH,0FFFFH,0FFFFH,0FFFFH, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H,0FFFFH,0FFFFH, 0000H, 0000H, 0000H,0FFFFH,0FFFFH,0FFFFH
	WORD  0FFFFH,0FFFFH, 0000H,0FFFFH,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH,0FFFFH, 0000H,0FFFFH,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H
	WORD  0FFFFH, 0000H,0FFFFH, 0000H,0FFFFH, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H,0FFFFH, 0000H,0FFFFH,0FFFFH,0FFFFH,0FFFFH, 0000H, 0000H,0FFFFH,0FFFFH, 0000H
	WORD  0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0FFFFH
	WORD  0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H,0FFFFH,0FFFFH,0FFFFH,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H, 0000H,0FFFFH, 0000H,0FFFFH, 0000H, 0000H,0FFFFH, 0000H,0FFFFH,0FFFFH,0FFFFH, 0000H

neve1:					; tabela que define o objeto neve 1 (cor, largura, pixels)
	WORD  0, 0, 64, 32 	; linha,coluna,largura,altura
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H

neve2:					; tabela que define o objeto neve 2 (cor, largura, pixels)
	WORD  0, 0, 64, 32 	; linha,coluna,largura,altura
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H, 0000H
	WORD  0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H, 0000H, 0000H,0FFFFH, 0000H, 0000H, 0000H, 0000H,0F444H, 0000H, 0000H

; *********************************************************************************
; * Código
; *********************************************************************************
	PLACE   0				; o código tem de começar em 0000H
inicio:
	MOV  SP, SP_inicial_prog_princ		; inicializa SP do programa principal

    MOV [APAGA_AVISO], R1	; apaga o aviso de nenhum cenário selecionado (o valor de R1 não é relevante)
    MOV [APAGA_ECRA], R1	; apaga todos os pixels já desenhados (o valor de R1 não é relevante)
	MOV	R1, 0				; cenário de fundo número 0
    MOV [SELECIONA_BG], R1	; seleciona o cenário de fundo
	MOV [SELECTIONA_MIDIA], R1 ; seleciona ficheiro de mídia 0 - som.
	MOV [INICIA_SOM], R1	; reproduz som
	MOV R1, 100				; define valor a ser usado como volume do som.
	MOV [VOLUME_SOM], R1	; define volume som como 100%
	MOV	R4, giftbox			; endereço da tabela que define o primeiro objeto
	MOV R7, NUM_ECRAS		; num total de ecrãs a desenhar (NUM_ECRAS + 1)

	; cria processos. O CALL não invoca a rotina, apenas cria um processo executável
	;CALL	teclado			; cria o processo teclado
	;CALL	objeto			; cria o processo objeto
     
posição_objeto:
    MOV R1, [R4]			; obtém a linha do objeto, será decrementada para controlo de fluxo
	MOV [linha], R1			; guarda LINHA do objeto
	ADD R4, 2				; avança para a 2ª palavra da tabela que define o objeto
	
	MOV R2, [R4]			; obtém a coluna do objeto, será decrementada para controlo de fluxo
	MOV [coluna], R2		; guarda coluna do objeto
	ADD R4, 2				; avança para a 3ª palavra da tabela que define o objeto
	
	MOV R5, [R4]			; obtém a largura do objeto - será decrementada para controlo de fluxo
	MOV [largura], R5		; guarda largura
	ADD R4, 2				; avança para a 4ª palavra da tabela que define o objeto
	
	MOV R6, [R4]			; obtém a altura do objeto
	MOV [altura], R6		; guarda a altura do objeto
	ADD R4, 2				; avança para a próxima palavra da tabela que define o objeto para obter a cor do pixel

	CALL desenha_objetos

; ciclo das rotinas cooperativas no programa principal
ciclo:
	CALL teclado			; verifica tecla premida
	CALL acoes_teclado		; executa ações do teclado conforme tecla premida

	verifica_flag_neve:
		MOV R3, [animacao_neve]
		CMP R3, 0
		JZ fim_ciclo
		CALL anima_neve

	verifica_flag_arvore:
		MOV R3, [animacao_arvore]
		CMP R3, 0
		JZ fim_ciclo
		CALL anima_arvore

fim_ciclo:
	JMP ciclo

stop_som:
	MOV R1, 0				; nº do som a parar
	MOV [PARA_SOM], R1		; para som

fim:
    JMP fim                 ; termina programa

; **********************************************************************
; Rotina para desenho inicial dos objetos
; **********************************************************************

; **********************************************************************
; DESENHA_OBJETOS - Desenha um objeto na linha e coluna indicadas
;			    com a forma e cor definidas na tabela indicada.
; Argumentos:   R1 - linha
;               R2 - coluna
;               R4 - tabela que define o objeto
;               R7 - número do ecrã a desenhar
;
; **********************************************************************
desenha_objetos:
	PUSH R2
	PUSH R3
	PUSH R4
	PUSH R5
	PUSH R6
	PUSH R7
	PUSH R8

seleciona_ecra:
	MOV [SELECIONA_ECRA], R7	; seleciona ecrã

esconder_ecras_que_iniciam_ocultos:
	CMP R7, 0					; se for o ecrã zero - neve 0
	JZ esconde_neve				; esconde neve 0
	CMP R7, 1					; se for o ecrã um - neve 1
	JZ esconde_neve				; esconde neve 1
	CMP R7, 3					; se for o ecrã três - luzes arvore 0
	JZ esconde_luzes_arvore		; esconde luzes arvore 0
	CMP R7, 4 					; se for o ecrã quatro - luzes arvore 1
	JZ esconde_luzes_arvore		; esconde luzes arvore 1
	JMP reinicia_coluna			; se não for nenhum dos ecrãs acima, reinicia a coluna

esconde_neve:
	MOV R8, 0					; num do ecrã a esconder
	MOV [ESCONDE_ECRA], R8		; comando do MediaCenter para esconder o ecrã
	MOV R8, 1					; num do ecrã a esconder
	MOV [ESCONDE_ECRA], R8		; comando do MediaCenter para esconder o ecrã
	JMP reinicia_coluna			; reinicia a coluna para desenhar o próximo objeto

esconde_luzes_arvore:
	MOV R8, 3					; num do ecrã a esconder
	MOV [ESCONDE_ECRA], R8		; comando do MediaCenter para esconder o ecrã
	MOV R8, 4					; num do ecrã a esconder
	MOV [ESCONDE_ECRA], R8		; comando do MediaCenter para esconder o ecrã
	JMP reinicia_coluna			; reinicia a coluna para desenhar o próximo objeto

reinicia_coluna:       			; desenha pixel na linha e coluna do objeto a partir da tabela
	MOV R2, [coluna]			; reinicia a coluna para cada linha

desenha_pixel:
	MOV	R3, [R4]				; obtém a cor do pixel do objeto
	CALL escreve_pixel			; escreve cada pixel do objeto

próxima_coluna:
	ADD	R4, 2					; endereço da cor do próximo pixel (2 porque cada cor de pixel é uma word)
    ADD R2, 1               	; próxima coluna
    SUB R5, 1					; menos uma coluna para tratar
    JNZ desenha_pixel      		; continua até percorrer toda a largura do objeto

próxima_linha:
	ADD R1, 1					; próxima linha
	MOV R5, [largura]			; reinicia a largura do objeto
	SUB R6, 1					; menos uma linha para tratar
	JNZ reinicia_coluna			; continua até percorrer todas as linhas
	
próximo_objeto:
	SUB R7, 1					; menos um ecrã para desenhar
	JNN posição_objeto			; desenha próximo ecrã se R7 (num do ecrã) não for < 0-7

	POP R8
	POP	R7
	POP	R6
	POP	R5
	POP	R4
	POP	R3
	POP	R2
	RET

; **********************************************************************
; Rotinas de animação
; **********************************************************************

; **********************************************************************
; ANIMA_NEVE - Executa uma animação simples da neve, alternando entre 
;			   objetos, de forma não bloqueante
; Argumentos:   Nenhum
;
; **********************************************************************
;PROCESS SP_inicial_neve
anima_neve:
	PUSH R1
	PUSH R2

verifica_atraso_neve:
	CALL atraso
	CMP R1, 0
	JNZ fim_rotina_neve

verifica_flag_neve_exibida:
	MOV R2, [flag_neve_exibida]
	CMP R2, 0
	JZ mostra_neve_1
	CMP R2, 1
	JZ mostra_neve_2
	CMP R2, 2
	JZ mostra_neve_1

mostra_neve_1:
	MOV R1, 0
	MOV [MOSTRA_ECRA], R1
	MOV R1, 1
	MOV [ESCONDE_ECRA], R1
	MOV R2, 1
	MOV [flag_neve_exibida], R2
	JMP fim_rotina_neve

mostra_neve_2:
	MOV R1, 0
	MOV [ESCONDE_ECRA], R1
	MOV R1, 1
	MOV [MOSTRA_ECRA], R1
	MOV R2, 2
	MOV [flag_neve_exibida], R2
	JMP fim_rotina_neve

fim_rotina_neve:
	POP R2
	POP R1
	RET

; **********************************************************************
; ANIMA_ARVORE - Executa uma animação simples da arvore, alternando entre 
; 				 objetos de luzes de natal de forma não bloqueante
; Argumentos:  Nenhum
;				
; **********************************************************************
;PROCESS SP_inicial_arvore
anima_arvore:
	PUSH R1
	PUSH R2

verifica_atraso_arvore:
	CALL atraso
	CMP R1, 0
	JNZ fim_rotina_arvore

verifica_flag_arvore_exibida:
	MOV R2, [flag_arvore_exibida]
	CMP R2, 0
	JZ mostra_arvore_1
	CMP R2, 1
	JZ mostra_arvore_2
	CMP R2, 2
	JZ mostra_arvore_1

mostra_arvore_1:
	MOV R1, 3
	MOV [MOSTRA_ECRA], R1
	MOV R1, 4
	MOV [ESCONDE_ECRA], R1
	MOV R2, 1
	MOV [flag_arvore_exibida], R2
	JMP fim_rotina_arvore

mostra_arvore_2:
	MOV R1, 3
	MOV [ESCONDE_ECRA], R1
	MOV R1, 4
	MOV [MOSTRA_ECRA], R1
	MOV R2, 2
	MOV [flag_arvore_exibida], R2
	JMP fim_rotina_arvore

fim_rotina_arvore:
	POP R2
	POP R1
	RET

; **********************************************************************
; Rotinas auxiliares 
; **********************************************************************

; **********************************************************************
; ESCREVE_PIXEL - Escreve um pixel na linha e coluna indicadas.
; Argumentos:   R1 - linha
;               R2 - coluna
;               R3 - cor do pixel (em formato ARGB de 16 bits)
;
; **********************************************************************
escreve_pixel:
	MOV [DEFINE_LINHA], R1	; seleciona a linha
	MOV [DEFINE_COLUNA], R2	; seleciona a coluna
	MOV [DEFINE_PIXEL], R3	; altera a cor do pixel na linha e coluna selecionadas
	RET

; **********************************************************************
; ATRASO - Faz DELAY iterações, para implementar um atraso no tempo,
;		 de forma não bloqueante.
; Argumentos: Nenhum
; Saidas:		R1 - Se 0, o atraso chegou ao fim
; **********************************************************************
atraso:
	PUSH R2
	MOV  R1, [contador_atraso]	; obtém valor do contador do atraso
	SUB  R1, 1
	MOV  [contador_atraso], R1	; atualiza valor do contador do atraso
	JNZ  sai_atraso
	MOV  R2, DELAY
	MOV  [contador_atraso], R2	; volta a colocar o valor inicial no contador do atraso
sai_atraso:
	POP  R2
	RET

; **********************************************************************
; TECLADO - Rotina cooperativa que deteta quando se carrega numa tecla na 4ª linha
;		  do teclado. Não é bloqueante e retorna logo, haja ou não uma tecla carregada.
; **********************************************************************
teclado:
	PUSH R0
	PUSH R1
	PUSH R2
	PUSH R3
	PUSH R5
	MOV  R2, TEC_LIN         ; endereço do periférico das linhas
	MOV  R3, TEC_COL         ; endereço do periférico das colunas
	MOV  R5, MASCARA		 ; para isolar os 4 bits de menor peso, ao ler as colunas do teclado

testa_linha_1:
	MOV  R1, 1				 ; testar a linha 1
	MOVB [R2], R1            ; escrever no periférico de saída (linhas)
	MOVB R0, [R3]            ; ler do periférico de entrada (colunas)
	AND  R0, R5				 ; elimina bits para além dos bits 0-3
	CMP  R0, 0               ; há tecla premida?
	JNZ  ha_tecla
	JMP testa_linha_2

testa_linha_2:
	MOV  R1, 2				 ; testar a linha 2 
	MOVB [R2], R1            ; escrever no periférico de saída (linhas)
	MOVB R0, [R3]            ; ler do periférico de entrada (colunas)
	AND  R0, R5				 ; elimina bits para além dos bits 0-3
	CMP  R0, 0               ; há tecla premida?
	JNZ  ha_tecla
	JMP testa_linha_3

testa_linha_3:
	MOV  R1, 4				 ; testar a linha 3 
	MOVB [R2], R1            ; escrever no periférico de saída (linhas)
	MOVB R0, [R3]            ; ler do periférico de entrada (colunas)
	AND  R0, R5				 ; elimina bits para além dos bits 0-3
	CMP  R0, 0               ; há tecla premida?
	JNZ  ha_tecla
	JMP testa_linha_4

testa_linha_4:
	MOV  R1, 8				 ; testar a linha 4 
	MOVB [R2], R1            ; escrever no periférico de saída (linhas)
	MOVB R0, [R3]            ; ler do periférico de entrada (colunas)
	AND  R0, R5				 ; elimina bits para além dos bits 0-3
	CMP  R0, 0               ; há tecla premida?
	JNZ  ha_tecla

nao_ha_tecla:
	MOV  R1, 0				 ; nenhuma tecla premida na linha 4 - será guardada na variável linha_carregada
	MOV  R2, 0               ; nenhuma tecla premida na coluna - será guardada na variável coluna_carregada
	JMP sai_teclado

ha_tecla:
	MOV  R2, R0              ; houve uma tecla premida

sai_teclado:
	MOV [linha_carregada], R1	; atualiza na variável a informação sobre se houve ou não tecla premida (0 - nenhuma linha premida, 1, 2, 4, 8)
	MOV  [coluna_carregada], R2	; atualiza na variável a informação sobre se houve ou não tecla premida (0 - nenhuma coluna premida, 1, 2, 4, 8)
								; O uso de R2 é redundante (bastava guardar R0), mas assim é mais explícito

	POP R5
    POP R3
    POP R2
    POP R1
    POP R0
    RET                      ; retorna sempre, haja ou não uma tecla carregada

; **********************************************************************
; TECLADO - Rotina que deteta qual tecla do teclado foi carregada e ativa ou desativa a animação correspondente
; Argumentos: Nenhum
; **********************************************************************
acoes_teclado:
	PUSH R0
	PUSH R1
	PUSH R2

	MOV R0, [linha_carregada]
	MOV R1, [coluna_carregada]
	CMP R0, 0
	JZ sai_rotina_teclado

verifica_linha_1:
	CMP R0, 1
	JNZ verifica_linha_2
	CMP R1, 1
	JZ tecla_premida_0
	CMP R1, 2
	JZ tecla_premida_1
	CMP R1, 4
	JZ tecla_premida_2
	MOV R2, 8
	CMP R1, R2
	JZ tecla_premida_3

verifica_linha_2:
	CMP R0, 2
	JNZ verifica_linha_3
	CMP R1, 1
	JZ tecla_premida_4
	CMP R1, 2
	JZ tecla_premida_5
	CMP R1, 4
	JZ tecla_premida_6
	MOV R2, 8
	CMP R1, R2
	JZ tecla_premida_7

verifica_linha_3:
	CMP R0, 4
	JNZ verifica_linha_4
	CMP R1, 1
	JZ tecla_premida_8
	CMP R1, 2
	JZ tecla_premida_9
	CMP R1, 4
	JZ tecla_premida_A
	MOV R2, 8
	CMP R1, R2
	JZ tecla_premida_B

verifica_linha_4:
	MOV R2, 8					; aqui usa-se R2 para guardar o valor 8 (linha 4) porque não é possível fazer o CMP com constante 8
	CMP R0, R2
	JNZ sai_rotina_teclado
	CMP R1, 1
	JZ tecla_premida_C
	CMP R1, 2
	JZ tecla_premida_D
	CMP R1, 3
	JZ tecla_premida_E
	MOV R2, 8
	CMP R1, R2
	JZ tecla_premida_F

tecla_premida_0:
	JMP sai_rotina_teclado

tecla_premida_1:
	JMP sai_rotina_teclado

tecla_premida_2:
	JMP sai_rotina_teclado

tecla_premida_3:
	JMP sai_rotina_teclado

tecla_premida_4:
	JMP sai_rotina_teclado

tecla_premida_5:
	JMP sai_rotina_teclado

tecla_premida_6:
	JMP sai_rotina_teclado

tecla_premida_7:
	JMP sai_rotina_teclado

tecla_premida_8:
	JMP seleciona_imagem_bg_0

tecla_premida_9:
	JMP seleciona_imagem_bg_1

tecla_premida_A:
	JMP seleciona_imagem_bg_2

tecla_premida_B:
	JMP seleciona_imagem_bg_3

tecla_premida_C:
	JMP ativa_animacao_neve

tecla_premida_D:
	JMP desativa_animacao_neve

tecla_premida_E:
	JMP ativa_animacao_arvore

tecla_premida_F:
	JMP desativa_animacao_arvore
	
ativa_animacao_neve:
	MOV R1, 1
	MOV [animacao_neve], R1
	JMP sai_rotina_teclado

desativa_animacao_neve:
	MOV R1, 0
	MOV [animacao_neve], R1
	MOV [ESCONDE_ECRA], R1
	MOV R1, 1
	MOV [ESCONDE_ECRA], R1
	JMP sai_rotina_teclado
	
ativa_animacao_arvore:
	MOV R1, 1
	MOV [animacao_arvore], R1
	JMP sai_rotina_teclado

desativa_animacao_arvore:
	MOV R1, 0
	MOV [animacao_arvore], R1
	MOV R1, 3
	MOV [ESCONDE_ECRA], R1
	MOV R1, 4
	MOV [ESCONDE_ECRA], R1
	JMP sai_rotina_teclado

seleciona_imagem_bg_0:
	MOV R1, 0
	MOV [SELECIONA_BG], R1
	JMP sai_rotina_teclado

seleciona_imagem_bg_1:
	MOV R1, 1
	MOV [SELECIONA_BG], R1
	JMP sai_rotina_teclado

seleciona_imagem_bg_2:
	MOV R1, 2
	MOV [SELECIONA_BG], R1
	JMP sai_rotina_teclado

seleciona_imagem_bg_3:
	MOV R1, 3
	MOV [SELECIONA_BG], R1
	JMP sai_rotina_teclado

sai_rotina_teclado:
	POP  R2
	POP  R1
    POP  R0
    RET                      
